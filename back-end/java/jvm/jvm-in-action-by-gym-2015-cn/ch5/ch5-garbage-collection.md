

# 5 垃圾收集器和内存分配

## 5.1 串行回收器

* 串行回收器
  * 串行回收器是指使用**单线程**进行垃圾回收的回收器；
  * 新生代串行处理器使用**复制算法**；
  * 老年代串行处理器使用**标记压缩算法**
  * **独占式**的垃圾回收；
  * **Stop-The-World**垃圾回收时，应用程序中的所有线程都停止工作，进行等待；
  * 串行回收器可以在新生代和老年代使用；
* 参数
  * -XX:+UseSerialGC：新生代、老年代都使用串行回收器。Client模式默认的垃圾回收器；
  * -XX:+UseParNewGC：新生代使用ParNew回收器，老年代使用串行收集器；
  * -XX:+UseParallelGC：新生代使用ParallelGC回收器，老年代使用串行收集器；

## 5.2 并行回收器

### 5.2.1 新生代ParNew回收器

* 并行回收器
  * 简单地将串行回收器多线程化；
  * **独占式**的垃圾回收；
  * 并发能力强的CPU上停顿时间短，单CPU或并发能力弱CPU表现差；
* 参数
  * -XX:+UseParNewGC：新生代使用ParNew回收器，老年代使用串行；
  * -XX:+UseConcMarkSweepGC：新生代使用ParNew回收器，老年代使用CMS；
  * -XX:+ParallelGCThreads：设定ParNew工作时的线程数量。与CPU数量相对；